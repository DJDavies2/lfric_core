!-------------------------------------------------------------------------------
! (c) The copyright relating to this work is owned jointly by the Crown,
! Met Office and NERC 2014.
! However, it has been created with the help of the GungHo Consortium,
! whose members are identified at https://puma.nerc.ac.uk/trac/GungHo/wiki
!-------------------------------------------------------------------------------
!> Test the presence of the ESMF library.
!>
!> This test is here to ensure that unit tests can link to ESMF.
!>
!> @deprecated Once we have actual Dynamo units using ESMF this test should go.
!>
module esmf_test

  use ESMF
  use pfunit_mod

  implicit none

contains

  !> Test that the ESMF module can be found.
  !>
  @Test
  subroutine test_esmf()

    implicit none

    type(ESMF_VM) :: vm
    integer :: status

    call ESMF_Initialize( vm=vm, &
                          defaultlogfilename="dynamo.Log", &
                          logkindflag=ESMF_LOGKIND_MULTI, &
                          rc=status )
    if (status /= ESMF_SUCCESS) call ESMF_Finalize( endflag=ESMF_END_ABORT )

    call ESMF_Finalize( rc=status )

    @assertEqual( ESMF_SUCCESS, status )

  end subroutine test_esmf

end module esmf_test
